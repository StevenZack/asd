目录

- [绪论](#绪论)
- [需求分析](#需求分析)
- [系统总体设计](#系统总体设计)
- [开发与实现](#开发与实现)
- [总结](#总结)
- [参考文献](#参考文献)
- [致谢](#致谢)
- [外文原文](#外文原文)
- [中文翻译](#中文翻译)

# 绪论

## 项目开发背景

聊天室App能为人们的交流和联系提供一个平台。通过完善的网上聊天系统的管理，可以达到增进人与人之间、商家与客户之间、消费者与消费者之间的交流和联系的目的。聊天室是一个通过国际互联信息网络进行多人通讯的系统。在这个信息及其发达的时代，目前我们可以利用电话、电子邮件、微信等工具来进行通讯和联系。这些东西或多或少都有一些自身的缺陷。比如说电话就是一种非常昂贵的通讯手段，虽然说前一段时间，李总理在大会上提出了提速降费的战略方针，但是通讯运营商依然没有将通讯的费用降下来。政府的政策并没有多大的作用。特别是在互联网时代，电话费事费钱而且在特定条件下交流的效果不一定好，如今使用电话的人越来越少了，人们更加喜欢通过互联网来与朋友进行沟通和交流与工作。鉴于以上现状，我觉得自己有必要学习并研究一下互联网聊天技术的原理和实现了。

因为每天在学校，打开手机使用次数最多的就是QQ，对QQ比较了解，所以一直是想自己制作一款类似的聊天软件。
开发这一款聊天室App的目的并不是为了商用或者普及到用户端去，因为本人以前也没有IM类应用的开发的经验，因为对聊天室这方面的知识和技术比较感兴趣，所以打算接着这次机会，深入研究一下如何实现一个自己的聊天室App、需要用到一些什么技术、消息到底是如何传输的？这一系列的问题将带领我编写一款自己的聊天室App。

## 项目简介

本项目将Go语言和Android Studio来编写一款现代的运行在安卓平台的聊天室App。通讯协议我们将使用WebSocket技术，同时也会用到一些HTTP协议来处理一些无状态请求。
其主要的功能有创建房间、修改本机用户名、进入聊天室、在聊天室中发送消息与接收消息等。

## 国内外现状

如今，网络聊天室已经没有互联网刚刚兴起那个时候火了，其主要原因是人们对于陌生人社交越来越失去兴趣，对于聊天对象的要求越来越高。不像当年，聊天室对于人们还是一个非常新奇的事物，能连上互联网已经是非常令人兴奋的事情了，更何况在互联网上与一个从来都没有见过面的陌生人聊天了。那个时候最火的聊天社区是天涯，人们在聊天室里面无话不谈，遇到志趣相投的人甚至能聊上一整天。

但是，随着移动互联网的普及，互联网对于人们来说已经不是什么新事物了，最大的变化，不过是把互联网从庞大昂贵且笨重的电脑搬到体积小巧的智能手机上来了而已。人们对于聊天室没有了当年的热情，不再热衷于陌生人社交。因为人人都能上网，互联网上的网民参差不齐，人们对于陌生人社交开始厌烦，开始更多的精力和心思用来维护熟人之间的社交。也正是这个节骨眼，诞生了一个能够载入互联网史册的熟人社交App：微信。

## 应用场景


# 需求分析

## 目标分析

## 功能分析

本系统的主要功能是给用户提供一个即开即用的聊天室以供聊天用。

## 主要技术

WebSocket技术、Go语言、Android Studio。

# 系统总体设计

## 系统总体设计

系统总体设计主要分为：服务端、客户端、数据结构、通讯协议

## 服务端

服务端由多个HTTP接口和一个WebSocket长连接组成。

HTTP接口用于处理一些无状态的请求，一共提供五个主要功能：用户登录、用户注册、获取房间列表、删除房间和获取房间在线人数。

用户登录传入参数为用户名和密码，客户端发生请求过来之后，服务器开始在数据库中查找该用户名和密码，如果存在则登录成功，不存在则登录失败。

用户注册和用户登录类似，传入参数为用户名和密码。一旦用户发送请求过来以后，服务器先向数据库查找这个用户名是否已经被注册过了，如果已经被注册过了，则返回错误：“用户名已经注册”；如果没有被注册过，则新建一个user对象，将用户名和密码赋值进去，同时还要新建一个随机的哈希值，我们称之为token。token未来会作为该用户名的通行证，用于验证用户的身份。然后将新建的user对象插入到数据库之中，同时把token返回给客户端。

获取房间列表直接将房间map以JSON格式返回过去就行了。

删除房间需要传入一个参数：房间名。然后服务器判断，如果此房间名存在，则删除他；如果不存在，则返回错误：“删除失败”。

获取房间在线人数需要一个传入参数：房间名。如果房间存在，则返回房间的人数，如果不存在，则返回错误：”房间不存在“

WebSocket长连接用于客户端监听某个房间内的广播，是他能够随时接收到服务器发过来的消息。客户端的WebSocket连接成功之后，需要想服务器发生一条消息，用于指定你要监听的房间名。如果房间不存在，则新建一个并监听他。监听分为两个方向，一个是监听者的方向，比如这个监听者也想要在房间中发生消息的时候，这边就会收到消息，然后讲这个消息广播到房间中去；另一个方向是监听这个房间的广播，比如这个房间之中有其他人发消息的时候，就会收到消息，然后将这个消息发送给监听者即可。


## 客户端

客户端的设计主要分为三个页面：登录与注册页面、主页面和房间聊天页面。

登录与注册页面放在一个Activity里面，通过TabLayout来切换。登录的时候，输入用户名和密码，然后点击登录按钮即可；注册页面类似，但是增加一个再次输入密码的输入框，用于保证用户注册的密码输入的是正确的。



## 数据结构

## 通讯协议


# 开发与实现

## HTTP框架的选择

## WebSocket库

## 订阅广播模式的实现

## Android开发框架

## Android网络请求库

# 总结

# 参考文献

# 致谢

# 外文原文

# 中文翻译